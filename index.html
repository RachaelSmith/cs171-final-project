<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<head>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="datamaps/dist/datamaps.world.min.js"></script>
  <style type="text/css">
    rect {
        fill:teal;
        fill-opacity:.8;
    }
  </style>
</head>
<body>
  <div id="container" style="position: relative; width: 1000px; height: 500px;"></div>
  <script type="text/javascript">
  var map = new Datamap({element: document.getElementById('container')});
  d3.json("data/countries_co2_raw_data.json", function(data) {
  
  clean_data = []

  data.Root.data.record.forEach(function(d){
    if("__text" in d.field[3]){
    var country_name = d.field[0]["__text"]
    var country_id = d.field[0]["_key"]
    var year = d.field[2]["__text"]
    var emissions = d.field[3]["__text"]

    clean_data.push({
        "name": country_name,
        "year": year,
        "emissions": emissions,
        "country_id": country_id

    })
    }
    });

    console.log(clean_data)

  

  });
  </script>
</body>
</html>